---
import type { GetStaticPaths } from "astro";

import Layout from "@/layouts/layout.astro";

import { slugify } from "@/lib/string";
import type { Dua } from "@/types/dua";

import DUAA from "data/duaa.json";

export interface DuaDetailWithSlugStaticPath {
  params: {
    id: number;
    slug: string;
  };
  props: {
    dua: Dua;
  };
}

export const getStaticPaths = (() => {
  const paths: DuaDetailWithSlugStaticPath[] = [];

  DUAA.map((dua, index) => {
    if (!dua.id) {
      return;
    }

    paths.push({
      params: {
        id: dua.id,
        slug: slugify(dua.title.title_en),
      },
      props: {
        dua: dua,
      },
    });

    paths.push({
      params: {
        id: dua.id,
        slug: slugify(dua.title.title_id),
      },
      props: {
        dua: dua,
      },
    });
  });

  return paths;
}) satisfies GetStaticPaths;

const { dua } = Astro.props;
---

<Layout>
  {dua.title.title_en}
</Layout>
